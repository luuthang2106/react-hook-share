# Hooks
### Được giới thiệu trong React v16.8.0: https://reactjs.org/blog/2019/02/06/react-v16.8.0.html

 - Giải quyết khó khăn trong sử dụng Class Component: super(props), this
 - Cung cấp các chức năng cho Function Component: state, side effect

 # Rules
 - Chỉ gọi Hook ở cấp cao nhất. Không gọi các Hook bên trong các vòng lặp, điều kiện hoặc các hàm lồng nhau.
 - Chỉ gọi trong function component, custom hook
```
// ------------
// First render
// ------------
useState('Mary')           // 1. Initialize the name state variable with 'Mary'
useEffect(persistForm)     // 2. Add an effect for persisting the form
useState('Poppins')        // 3. Initialize the surname state variable with 'Poppins'
useEffect(updateTitle)     // 4. Add an effect for updating the title

// -------------
// Second render
// -------------
useState('Mary')           // 1. Read the name state variable (argument is ignored)
useEffect(persistForm)     // 2. Replace the effect for persisting the form
useState('Poppins')        // 3. Read the surname state variable (argument is ignored)
useEffect(updateTitle)     // 4. Replace the effect for updating the title

```
# Basic Hooks

## useState
- Nhận một state ban đầu và trả về 2 giá trị: state và hàm cập nhật state
`const [state, useState] = useState(initValue)`
- Dùng shallow compare (===) nên phải immutable value
```
const a = {}
const b = a
const c = {}
console.log(a === b) //true
console.log(a === c) //false
```
- Nếu nhiều state được set cùng lúc, sẽ chỉ có 1 lần render (batched)
- useState không rerender ngay lập tức (queue), nên dùng useEffect kèm
- Nên chia state nhỏ để dễ quản lý hơn là 1 object
## useEffect
 - Chạy side effect khi component đã được render: fetching data, update DOM, and timers, props change, subscribe, event listenr
 - `useEffect` nhận 2 tham số. Tham số deps tuỳ có thể tuỳ chọn (không nên)
 - Nếu client side và dựa vào props để render thì dùng useLayoutEffect
 

> Note

The array of dependencies is not passed as arguments to the callback. Conceptually, though, that’s what they represent: every value referenced inside the callback should also appear in the dependencies array. In the future, a sufficiently advanced compiler could create this array automatically.

We recommend using the  [`exhaustive-deps`](https://github.com/facebook/react/issues/14920)  rule as part of our  [`eslint-plugin-react-hooks`](https://www.npmjs.com/package/eslint-plugin-react-hooks#installation)  package. It warns when dependencies are specified incorrectly and suggests a fix.

 - [lỗi thường gặp](https://github.com/facebook/react/issues/14920)
 ```
useEffect(() => {
  //Runs on every render
});

useEffect(() => {
  //Runs only on the first render
}, []);

useEffect(() => {
  //Runs on the first render
  //And any time any dependency value changes
}, [prop, state]);
```
## useContext
- Là một cách quản lý state toàn cục
- Dùng kèm useState, createContext
- Facebook chỉ dùng context api

> Internally, **React Redux uses React's "context" feature to make the Redux store accessible to deeply nested connected components**. As of React Redux version 6, this is normally handled by a single default context object instance generated by React.

## Tham khảo: 
[usehook-ts.com](https://usehooks-ts.com/)
[usehooks.com](https://usehooks.com/)